services:
  praat:
    build:
      context: .
      dockerfile: docker/Dockerfile.praat
    container_name: hskk-praat-container
    volumes:
      - ./data:/data
      - ./praat_scripts:/praat/scripts:ro
    restart: unless-stopped

  app:
    build:
      context: .
      dockerfile: docker/Dockerfile
    container_name: hskk-praat-app
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
      - ./app:/app/app
      - /var/run/docker.sock:/var/run/docker.sock
    depends_on:
      - praat
    environment:
      - PRAAT_CONTAINER_NAME=hskk-praat-container
      - LOG_LEVEL=INFO
    restart: unless-stopped